(()=>{"use strict";var e={580:(e,t,r)=>{r.r(t)},529:(e,t,r)=>{r.r(t)},274:(e,t,r)=>{r.r(t)},646:(e,t,r)=>{r.r(t)},717:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(842)),n=r(527);t.default=class{constructor(){this.controller=new s.default,this.view=new n.AppView}start(){document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>{e&&this.view.drawNews(e)})))),this.controller.getSources((e=>{e&&this.view.drawSources(e)}))}}},853:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(24));class n extends s.default{constructor(){super("https://nodenews.up.railway.app/",{apiKey:"f74f146e196247a0901b90a947ac928a"})}}t.default=n},842:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(853));class n extends s.default{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let r=e.target;const o=e.currentTarget;for(;r!==o;){if(r.classList.contains("source__item")){const e=r.getAttribute("data-source-id");return void(e&&o.getAttribute("data-source")!==e&&(o.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}r.parentElement&&(r=r.parentElement)}}}t.default=n},24:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(109);t.default=class{constructor(e,t){this.baseLink=e,this.options=t,this.baseLink=e,this.options=t}getResp({endpoint:e,options:t},r=(()=>{console.error("No callback for GET response")})){this.load("GET",e,r,t)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const r=Object.assign(Object.assign({},this.options),t);let o=`${this.baseLink}${e}?`;return Object.keys(r).forEach((e=>{o+=`${e}=${r[e]}&`})),o.slice(0,-1)}load(e,t,r,s){(0,o.toggleLoader)(),fetch(this.makeUrl(t,s),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>r(e))).catch((e=>console.error(e))).finally((()=>(0,o.toggleLoader)()))}}},527:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppView=void 0;const s=r(868),n=o(r(798)),u=o(r(53));class a{constructor(){this.news=new n.default,this.sources=new u.default}drawNews(e){const t=(null==e?void 0:e.articles)||[];this.news.draw(t)}drawSources(e){const t=(null==e?void 0:e.sources)||[];this.sources.draw(t),(0,s.drawFilteredNews)(t,this.sources)}}t.AppView=a,t.default=a},868:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.drawFilteredNews=void 0,t.drawFilteredNews=(e,t)=>{const r=document.querySelector(".text-field__input");null==r||r.addEventListener("input",(o=>{const s=e.filter((e=>e.name.toLowerCase().includes(r.value)));t.draw(s)}))}},798:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(580),t.default=class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),o=document.querySelector("#newsItemTemp");t.forEach(((e,t)=>{var s;const n=o.content.cloneNode(!0);t%2&&(null===(s=n.querySelector(".news__item"))||void 0===s||s.classList.add("alt")),n.querySelector(".news__meta-photo").style.backgroundImage=`url(${e.urlToImage||"img/news_placeholder.jpg"})`,n.querySelector(".news__meta-author").textContent=e.author||e.source.name,n.querySelector(".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),n.querySelector(".news__description-title").textContent=e.title,n.querySelector(".news__description-source").textContent=e.source.name,n.querySelector(".news__description-content").textContent=e.description,n.querySelector(".news__read-more a").setAttribute("href",e.url),r.append(n)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(r)}}},53:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(529),t.default=class{draw(e){const t=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");e.forEach((e=>{const o=r.content.cloneNode(!0);o.querySelector(".source__item-name").textContent=e.name,o.querySelector(".source__item").setAttribute("data-source-id",e.id),t.append(o)}));const o=document.querySelector(".sources");if(o.innerHTML="",e.length)o.style.display="grid",o.append(t);else{const e=document.createElement("span");e.className="emptyNews",e.textContent="Please, make another request!",o.style.display="flex",o.append(e)}}}},109:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleLoader=void 0,t.toggleLoader=()=>document.querySelector(".shadow").classList.toggle("loading")},607:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(717));r(274),r(646),(new s.default).start()}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YyxnQ0FDeEJlLEVBQWdCbEIsTUFBTW1CLFFBQVUsT0FDaENELEVBQWdCTixPQUFPUSxFQUMzQixDQUtKLEUsY0N6QkpwSCxPQUFPQyxlQUFlQyxFQUFTLGFBQWMsQ0FBRUMsT0FBTyxJQUN0REQsRUFBUTRELGtCQUFlLEVBRXZCNUQsRUFBUTRELGFBRGEsSUFBTWxELFNBQVNDLGNBQWMsV0FBV29CLFVBQVVzRixPQUFPLFUsc0JDRjlFLElBQUkzSCxFQUFtQkMsTUFBUUEsS0FBS0QsaUJBQW9CLFNBQVVFLEdBQzlELE9BQVFBLEdBQU9BLEVBQUlDLFdBQWNELEVBQU0sQ0FBRSxRQUFXQSxFQUN4RCxFQUNBRSxPQUFPQyxlQUFlQyxFQUFTLGFBQWMsQ0FBRUMsT0FBTyxJQUN0RCxNQUFNcUgsRUFBUTVILEVBQWdCLEVBQVEsTUFDdEMsRUFBUSxLQUNSLEVBQVEsTUFDSSxJQUFJNEgsRUFBTWhILFNBQ2xCRyxPLEdDUkE4RyxFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWExSCxRQUdyQixJQUFJNEgsRUFBU0wsRUFBeUJFLEdBQVksQ0FHakR6SCxRQUFTLENBQUMsR0FPWCxPQUhBNkgsRUFBb0JKLEdBQVVLLEtBQUtGLEVBQU81SCxRQUFTNEgsRUFBUUEsRUFBTzVILFFBQVN3SCxHQUdwRUksRUFBTzVILE9BQ2YsQ0NyQkF3SCxFQUFvQk8sRUFBSy9ILElBQ0gsb0JBQVhnSSxRQUEwQkEsT0FBT0MsYUFDMUNuSSxPQUFPQyxlQUFlQyxFQUFTZ0ksT0FBT0MsWUFBYSxDQUFFaEksTUFBTyxXQUU3REgsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sR0FBTyxFQ0ZwQ3VILEVBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXdzLWpzLy4vc3JjL2NvbXBvbmVudHMvYXBwL2FwcC50cyIsIndlYnBhY2s6Ly9uZXdzLWpzLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9hcHBMb2FkZXIudHMiLCJ3ZWJwYWNrOi8vbmV3cy1qcy8uL3NyYy9jb21wb25lbnRzL2NvbnRyb2xsZXIvY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9uZXdzLWpzLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vbmV3cy1qcy8uL3NyYy9jb21wb25lbnRzL3ZpZXcvYXBwVmlldy50cyIsIndlYnBhY2s6Ly9uZXdzLWpzLy4vc3JjL2NvbXBvbmVudHMvdmlldy9kcmF3RmlsdGVyZWROZXdzLnRzIiwid2VicGFjazovL25ld3MtanMvLi9zcmMvY29tcG9uZW50cy92aWV3L25ld3MvbmV3cy50cyIsIndlYnBhY2s6Ly9uZXdzLWpzLy4vc3JjL2NvbXBvbmVudHMvdmlldy9zb3VyY2VzL3NvdXJjZXMudHMiLCJ3ZWJwYWNrOi8vbmV3cy1qcy8uL3NyYy9jb21wb25lbnRzL3ZpZXcvdG9nZ2xlTG9hZGVyLnRzIiwid2VicGFjazovL25ld3MtanMvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbmV3cy1qcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9uZXdzLWpzL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vbmV3cy1qcy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgY29udHJvbGxlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2NvbnRyb2xsZXJcIikpO1xyXG5jb25zdCBhcHBWaWV3XzEgPSByZXF1aXJlKFwiLi4vdmlldy9hcHBWaWV3XCIpO1xyXG5jbGFzcyBBcHAge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IGNvbnRyb2xsZXJfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IGFwcFZpZXdfMS5BcHBWaWV3KCk7XHJcbiAgICB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc291cmNlcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuY29udHJvbGxlci5nZXROZXdzKGUsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuZHJhd05ld3MoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmdldFNvdXJjZXMoKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5kcmF3U291cmNlcyhkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEFwcDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgbG9hZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vbG9hZGVyXCIpKTtcclxuY2xhc3MgQXBwTG9hZGVyIGV4dGVuZHMgbG9hZGVyXzEuZGVmYXVsdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignaHR0cHM6Ly9ub2RlbmV3cy51cC5yYWlsd2F5LmFwcC8nLCB7XHJcbiAgICAgICAgICAgIGFwaUtleTogJ2Y3NGYxNDZlMTk2MjQ3YTA5MDFiOTBhOTQ3YWM5MjhhJywgLy8g0L/QvtC70YPRh9C40YLQtSDRgdCy0L7QuSDQutC70Y7RhyBodHRwczovL25ld3NhcGkub3JnL1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEFwcExvYWRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgYXBwTG9hZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vYXBwTG9hZGVyXCIpKTtcclxuY2xhc3MgQXBwQ29udHJvbGxlciBleHRlbmRzIGFwcExvYWRlcl8xLmRlZmF1bHQge1xyXG4gICAgZ2V0U291cmNlcyhjYWxsYmFjaykge1xyXG4gICAgICAgIHN1cGVyLmdldFJlc3AoeyBlbmRwb2ludDogJ3NvdXJjZXMnIH0sIGNhbGxiYWNrKTtcclxuICAgIH1cclxuICAgIGdldE5ld3MoZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgY29uc3QgbmV3c0NvbnRhaW5lciA9IGUuY3VycmVudFRhcmdldDtcclxuICAgICAgICB3aGlsZSAodGFyZ2V0ICE9PSBuZXdzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzb3VyY2VfX2l0ZW0nKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlSWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNvdXJjZS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3NDb250YWluZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXNvdXJjZScpICE9PSBzb3VyY2VJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdzQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1zb3VyY2UnLCBzb3VyY2VJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cGVyLmdldFJlc3Aoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdldmVyeXRoaW5nJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBzb3VyY2VJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRhcmdldC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSAodGFyZ2V0LnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEFwcENvbnRyb2xsZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IHRvZ2dsZUxvYWRlcl8xID0gcmVxdWlyZShcIi4uL3ZpZXcvdG9nZ2xlTG9hZGVyXCIpO1xyXG5jbGFzcyBMb2FkZXIge1xyXG4gICAgY29uc3RydWN0b3IoYmFzZUxpbmssIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmJhc2VMaW5rID0gYmFzZUxpbms7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLmJhc2VMaW5rID0gYmFzZUxpbms7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldFJlc3AoeyBlbmRwb2ludCwgb3B0aW9ucyB9LCBjYWxsYmFjayA9ICgpID0+IHsgY29uc29sZS5lcnJvcignTm8gY2FsbGJhY2sgZm9yIEdFVCByZXNwb25zZScpOyB9KSB7XHJcbiAgICAgICAgdGhpcy5sb2FkKCdHRVQnLCBlbmRwb2ludCwgY2FsbGJhY2ssIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZXJyb3JIYW5kbGVyKHJlcykge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDEgfHwgcmVzLnN0YXR1cyA9PT0gNDA0KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFNvcnJ5LCBidXQgdGhlcmUgaXMgJHtyZXMuc3RhdHVzfSBlcnJvcjogJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IocmVzLnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgbWFrZVVybChlbmRwb2ludCwgb3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHVybE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucyksIG9wdGlvbnMpO1xyXG4gICAgICAgIGxldCB1cmwgPSBgJHt0aGlzLmJhc2VMaW5rfSR7ZW5kcG9pbnR9P2A7XHJcbiAgICAgICAgT2JqZWN0LmtleXModXJsT3B0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgIHVybCArPSBgJHtrZXl9PSR7dXJsT3B0aW9uc1trZXldfSZgO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1cmwuc2xpY2UoMCwgLTEpO1xyXG4gICAgfVxyXG4gICAgbG9hZChtZXRob2QsIGVuZHBvaW50LCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICgwLCB0b2dnbGVMb2FkZXJfMS50b2dnbGVMb2FkZXIpKCk7XHJcbiAgICAgICAgZmV0Y2godGhpcy5tYWtlVXJsKGVuZHBvaW50LCBvcHRpb25zKSwgeyBtZXRob2QgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5lcnJvckhhbmRsZXIpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBjYWxsYmFjayhkYXRhKSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcclxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gKDAsIHRvZ2dsZUxvYWRlcl8xLnRvZ2dsZUxvYWRlcikoKSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gTG9hZGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkFwcFZpZXcgPSB2b2lkIDA7XHJcbmNvbnN0IGRyYXdGaWx0ZXJlZE5ld3NfMSA9IHJlcXVpcmUoXCIuL2RyYXdGaWx0ZXJlZE5ld3NcIik7XHJcbmNvbnN0IG5ld3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9uZXdzL25ld3NcIikpO1xyXG5jb25zdCBzb3VyY2VzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vc291cmNlcy9zb3VyY2VzXCIpKTtcclxuY2xhc3MgQXBwVmlldyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLm5ld3MgPSBuZXcgbmV3c18xLmRlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnNvdXJjZXMgPSBuZXcgc291cmNlc18xLmRlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIGRyYXdOZXdzKGRhdGEpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSAoZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmFydGljbGVzKSB8fCBbXTtcclxuICAgICAgICB0aGlzLm5ld3MuZHJhdyh2YWx1ZXMpO1xyXG4gICAgfVxyXG4gICAgZHJhd1NvdXJjZXMoZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IChkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEuc291cmNlcykgfHwgW107XHJcbiAgICAgICAgdGhpcy5zb3VyY2VzLmRyYXcodmFsdWVzKTtcclxuICAgICAgICAoMCwgZHJhd0ZpbHRlcmVkTmV3c18xLmRyYXdGaWx0ZXJlZE5ld3MpKHZhbHVlcywgdGhpcy5zb3VyY2VzKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkFwcFZpZXcgPSBBcHBWaWV3O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBBcHBWaWV3O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmRyYXdGaWx0ZXJlZE5ld3MgPSB2b2lkIDA7XHJcbmNvbnN0IGRyYXdGaWx0ZXJlZE5ld3MgPSAoZGF0YSwgc291cmNlcykgPT4ge1xyXG4gICAgY29uc3Qgc2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtZmllbGRfX2lucHV0Jyk7XHJcbiAgICBzZWFyY2ggPT09IG51bGwgfHwgc2VhcmNoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWFyY2guYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IGRhdGEuZmlsdGVyKGVsID0+IGVsLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gudmFsdWUpKTtcclxuICAgICAgICBzb3VyY2VzLmRyYXcoZmlsdGVyZWREYXRhKTtcclxuICAgIH0pO1xyXG59O1xyXG5leHBvcnRzLmRyYXdGaWx0ZXJlZE5ld3MgPSBkcmF3RmlsdGVyZWROZXdzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5yZXF1aXJlKFwiLi9uZXdzLmNzc1wiKTtcclxuY2xhc3MgTmV3cyB7XHJcbiAgICBkcmF3KGRhdGEpIHtcclxuICAgICAgICBjb25zdCBuZXdzID0gZGF0YS5sZW5ndGggPj0gMTAgPyBkYXRhLmZpbHRlcigoX2l0ZW0sIGlkeCkgPT4gaWR4IDwgMTApIDogZGF0YTtcclxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICBjb25zdCBuZXdzSXRlbVRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3c0l0ZW1UZW1wJyk7XHJcbiAgICAgICAgbmV3cy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdzQ2xvbmUgPSBuZXdzSXRlbVRlbXAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChpZHggJSAyKVxyXG4gICAgICAgICAgICAgICAgKF9hID0gbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19pdGVtJykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbGFzc0xpc3QuYWRkKCdhbHQnKTtcclxuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19tZXRhLXBob3RvJykuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2l0ZW0udXJsVG9JbWFnZSB8fCAnaW1nL25ld3NfcGxhY2Vob2xkZXIuanBnJ30pYDtcclxuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19tZXRhLWF1dGhvcicpLnRleHRDb250ZW50ID0gaXRlbS5hdXRob3IgfHwgaXRlbS5zb3VyY2UubmFtZTtcclxuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19tZXRhLWRhdGUnKS50ZXh0Q29udGVudCA9IGl0ZW0ucHVibGlzaGVkQXRcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAxMClcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLScpXHJcbiAgICAgICAgICAgICAgICAucmV2ZXJzZSgpXHJcbiAgICAgICAgICAgICAgICAuam9pbignLScpO1xyXG4gICAgICAgICAgICBuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX2Rlc2NyaXB0aW9uLXRpdGxlJykudGV4dENvbnRlbnQgPSBpdGVtLnRpdGxlO1xyXG4gICAgICAgICAgICBuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX2Rlc2NyaXB0aW9uLXNvdXJjZScpLnRleHRDb250ZW50ID0gaXRlbS5zb3VyY2UubmFtZTtcclxuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19kZXNjcmlwdGlvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpdGVtLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX3JlYWQtbW9yZSBhJykuc2V0QXR0cmlidXRlKCdocmVmJywgaXRlbS51cmwpO1xyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmQobmV3c0Nsb25lKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3cycpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzJykuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IE5ld3M7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnJlcXVpcmUoXCIuL3NvdXJjZXMuY3NzXCIpO1xyXG5jbGFzcyBTb3VyY2VzIHtcclxuICAgIGRyYXcoZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZUl0ZW1UZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdXJjZUl0ZW1UZW1wJyk7XHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUNsb25lID0gc291cmNlSXRlbVRlbXAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIHNvdXJjZUNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2VfX2l0ZW0tbmFtZScpLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xyXG4gICAgICAgICAgICBzb3VyY2VDbG9uZS5xdWVyeVNlbGVjdG9yKCcuc291cmNlX19pdGVtJykuc2V0QXR0cmlidXRlKCdkYXRhLXNvdXJjZS1pZCcsIGl0ZW0uaWQpO1xyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmQoc291cmNlQ2xvbmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2VzJyk7XHJcbiAgICAgICAgc291cmNlQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGlmICghZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgZW1wdHlOZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICBlbXB0eU5ld3MuY2xhc3NOYW1lID0gJ2VtcHR5TmV3cyc7XHJcbiAgICAgICAgICAgIGVtcHR5TmV3cy50ZXh0Q29udGVudCA9ICdQbGVhc2UsIG1ha2UgYW5vdGhlciByZXF1ZXN0ISc7XHJcbiAgICAgICAgICAgIHNvdXJjZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgICAgICBzb3VyY2VDb250YWluZXIuYXBwZW5kKGVtcHR5TmV3cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzb3VyY2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcclxuICAgICAgICAgICAgc291cmNlQ29udGFpbmVyLmFwcGVuZChmcmFnbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFNvdXJjZXM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMudG9nZ2xlTG9hZGVyID0gdm9pZCAwO1xyXG5jb25zdCB0b2dnbGVMb2FkZXIgPSAoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hhZG93JykuY2xhc3NMaXN0LnRvZ2dsZSgnbG9hZGluZycpO1xyXG5leHBvcnRzLnRvZ2dsZUxvYWRlciA9IHRvZ2dsZUxvYWRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgYXBwXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY29tcG9uZW50cy9hcHAvYXBwXCIpKTtcclxucmVxdWlyZShcIi4vZ2xvYmFsLmNzc1wiKTtcclxucmVxdWlyZShcIi4vcHJlbG9hZGVyLmNzc1wiKTtcclxuY29uc3QgYXBwID0gbmV3IGFwcF8xLmRlZmF1bHQoKTtcclxuYXBwLnN0YXJ0KCk7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJuYW1lcyI6WyJfX2ltcG9ydERlZmF1bHQiLCJ0aGlzIiwibW9kIiwiX19lc01vZHVsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY29udHJvbGxlcl8xIiwiYXBwVmlld18xIiwiY29uc3RydWN0b3IiLCJjb250cm9sbGVyIiwiZGVmYXVsdCIsInZpZXciLCJBcHBWaWV3Iiwic3RhcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImdldE5ld3MiLCJkYXRhIiwiZHJhd05ld3MiLCJnZXRTb3VyY2VzIiwiZHJhd1NvdXJjZXMiLCJsb2FkZXJfMSIsIkFwcExvYWRlciIsInN1cGVyIiwiYXBpS2V5IiwiYXBwTG9hZGVyXzEiLCJBcHBDb250cm9sbGVyIiwiY2FsbGJhY2siLCJnZXRSZXNwIiwiZW5kcG9pbnQiLCJ0YXJnZXQiLCJuZXdzQ29udGFpbmVyIiwiY3VycmVudFRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic291cmNlSWQiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJvcHRpb25zIiwic291cmNlcyIsInBhcmVudEVsZW1lbnQiLCJ0b2dnbGVMb2FkZXJfMSIsImJhc2VMaW5rIiwiY29uc29sZSIsImVycm9yIiwibG9hZCIsImVycm9ySGFuZGxlciIsInJlcyIsIm9rIiwic3RhdHVzIiwibG9nIiwic3RhdHVzVGV4dCIsIkVycm9yIiwibWFrZVVybCIsInVybE9wdGlvbnMiLCJhc3NpZ24iLCJ1cmwiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInNsaWNlIiwibWV0aG9kIiwidG9nZ2xlTG9hZGVyIiwiZmV0Y2giLCJ0aGVuIiwianNvbiIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsImRyYXdGaWx0ZXJlZE5ld3NfMSIsIm5ld3NfMSIsInNvdXJjZXNfMSIsIm5ld3MiLCJ2YWx1ZXMiLCJhcnRpY2xlcyIsImRyYXciLCJkcmF3RmlsdGVyZWROZXdzIiwic2VhcmNoIiwiZmlsdGVyZWREYXRhIiwiZmlsdGVyIiwiZWwiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImxlbmd0aCIsIl9pdGVtIiwiaWR4IiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwibmV3c0l0ZW1UZW1wIiwiaXRlbSIsIl9hIiwibmV3c0Nsb25lIiwiY29udGVudCIsImNsb25lTm9kZSIsImFkZCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwidXJsVG9JbWFnZSIsInRleHRDb250ZW50IiwiYXV0aG9yIiwic291cmNlIiwicHVibGlzaGVkQXQiLCJzcGxpdCIsInJldmVyc2UiLCJqb2luIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFwcGVuZCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwic291cmNlSXRlbVRlbXAiLCJzb3VyY2VDbG9uZSIsImlkIiwic291cmNlQ29udGFpbmVyIiwiZGlzcGxheSIsImVtcHR5TmV3cyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0b2dnbGUiLCJhcHBfMSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sInNvdXJjZVJvb3QiOiIifQ==